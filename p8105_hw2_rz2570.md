p8105\_hw2\_rz2570
================
Ruilian Zhang
10/2/2021

``` r
library(tidyverse)
```

    ## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──

    ## ✓ ggplot2 3.3.5     ✓ purrr   0.3.4
    ## ✓ tibble  3.1.4     ✓ dplyr   1.0.7
    ## ✓ tidyr   1.1.3     ✓ stringr 1.4.0
    ## ✓ readr   2.0.1     ✓ forcats 0.5.1

    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## x dplyr::filter() masks stats::filter()
    ## x dplyr::lag()    masks stats::lag()

``` r
library(readxl)
```

# Problem 1

``` r
# read and clean Mr. Trash Wheel data
trash_wheel_df = read_excel("data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", sheet = "Mr. Trash Wheel") %>% 
  janitor::clean_names() %>% 
  select(-starts_with("x")) %>% 
  drop_na(dumpster) %>% 
  mutate(sports_balls = round(sports_balls))
```

    ## New names:
    ## * `` -> ...15
    ## * `` -> ...16
    ## * `` -> ...17

``` r
# read and clean precipitation data for 2018 and 2019
precipitation_2018 = read_excel("data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", sheet = "2018 Precipitation", range = "A2:B14") %>% 
  janitor::clean_names() %>%
  drop_na() %>% 
  rename(total_precipitation = total) %>% 
  mutate(year = 2018) %>% 
  relocate(year)

precipitation_2019 = read_excel("data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", sheet = "2019 Precipitation", range = "A2:B14") %>% 
  janitor::clean_names() %>%
  drop_na() %>% 
  rename(total_precipitation = total) %>% 
  mutate(year = 2019) %>% 
  relocate(year)

# combine precipitation datasets and convert month to a character variable
precipitation_df = bind_rows(precipitation_2018, precipitation_2019) %>% 
  mutate(month = month.name[month])
```

In trash\_wheel\_df, there are 344 observations. In precipitation\_df,
there are 18 observations.  
For example, in trash\_wheel\_df, the rounded number of sports balls in
dumpster 1 is 7 and the number of cigarette butts is 126000 in May 2014.
In precipitation\_df, the total precipitation in June 2018 is 4.77 inch,
and in June 2019 is 0.42 inch.  
For available data, the total precipitation in 2018 is 70.33.  
The median number of sports balls in a dumpster in 2019 is 8.

# Problem 2

``` r
# clean the data in pols-month.csv
pols_month_df = read_csv("data/fivethirtyeight_datasets/pols-month.csv") %>%
  separate(col = mon, into = c("year", "month", "day"), sep = "-") %>% 
  mutate(month = month.name[as.numeric(month)]) %>% 
  mutate(president = ifelse(prez_gop == "1", "gop", "dem")) %>% 
  select(-c(prez_dem, prez_gop)) %>% 
  select(-day)
```

    ## Rows: 822 Columns: 9

    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon

    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
# clean the data in snp.csv
snp_df = read_csv("data/fivethirtyeight_datasets/snp.csv") %>% 
  separate(col = date, into = c("year", "month", "day"),sep = "/") %>% 
  select(-day) %>% 
  mutate(year = as.numeric(year)) %>% 
  mutate(month = as.numeric(month)) %>%
  arrange(year, month) %>% 
  mutate(month = month.name[month])
```

    ## Rows: 787 Columns: 2

    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close

    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
